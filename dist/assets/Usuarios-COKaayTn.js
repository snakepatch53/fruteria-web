import{v as D,w as S,x as F,y as q,j as e,z as M,A as O,B as P,D as p,E as A,G as B}from"./index-BHxOHBCn.js";import{u as G,C as I,a as R,b as n,c as T}from"./useCrudPanel-CgGUm6X_.js";function L(){const s=(a,o,{isEmail:k})=>{var c,m,u,x;let i=!0;return(c=a.password)!=null&&c.value&&((u=(m=a.password)==null?void 0:m.value)==null?void 0:u.length)<8&&(o("La contraseña debe tener minimo 8 caracteres"),i=!1),k((x=a.email)==null?void 0:x.value)||(o("El correo electronico no es valido"),i=!1),i},{entityName:r,pluralEntityName:t,head:h,table:f,form:j,confirm:C,progress:g,datalist:l,$form:N,handleModeNew:b,handleModeEdit:v,handleModeDelete:E,hanleCancel:d,handleSubmit:w,handleDelete:y,handleSearch:U}=G({entityName:"Usuario",pluralEntityName:"Usuarios",excludeFieldsValidationEdit:["password"],searchFields:["name","email"],extraValidations:s,isStorageMultipartFormData:!0,crudGet:D,crudStorage:S,crudUpdate:F,crudDestroy:q});return e.jsxs("div",{className:"p-4 space-y-4 w-full ",children:[e.jsx(I,{title:t,icon:M,isOpen:h,onClickNew:b,handleSearch:U}),f&&e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:l==null?void 0:l.map(a=>e.jsx(V,{user:a,onEdit:()=>v(a),onDelete:()=>E(a)},a.id))}),e.jsxs(R,{title:r,isOpen:j,onClickCancel:d,onSubmit:w,formRef:N,children:[e.jsx(n,{label:"Nombre",name:"name",placeholder:"Nombre del usuario",required:!0}),e.jsx(n,{label:"Email",name:"email",placeholder:"Escriba el email",required:!0}),e.jsx(n,{label:"Contraseña",placeholder:"Escriba una contraseña",type:"password",name:"password",required:!0})]}),e.jsx(T,{isOpen:C,text:"¿Estás seguro de eliminar este usuario?",onClickDelete:y,onClickCancel:d}),e.jsx(O,{isOpen:g,text:"Procesando tu solicitud..."})]})}function V({user:s,onEdit:r,onDelete:t}){return e.jsxs("div",{className:" flex items-center gap-2 p-4 border rounded-lg shadow bg-[--c2] text-[--c2-txt] ",children:[e.jsx(P,{name:s.name}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-[--c2-txt] truncate",children:s.name}),e.jsx("p",{className:"text-sm text-[--c2-txt3] truncate",children:s.email}),e.jsx("p",{className:"text-xs text-[--c2-txt4]",children:s.role})]}),e.jsxs("div",{className:" flex flex-shrink-0 ",children:[e.jsx(p,{onClick:r,icon:A}),e.jsx(p,{onClick:t,icon:B})]})]})}export{L as default};
