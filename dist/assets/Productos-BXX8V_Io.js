import{H as O,I as D,J as S,K as w,j as e,z as M,A as I,c as U,D as f,E as _,G as A}from"./index-yy4pZdLe.js";import{u as K,C as L,a as T,b as t,c as V}from"./useCrudPanel-D6SHNbnu.js";function H(){var o;const a=(s,d)=>{var x,m,p,b;let u=!0;return(m=(x=s.photo)==null?void 0:x.files)!=null&&m.length&&((b=(p=s.photo)==null?void 0:p.files[0])==null?void 0:b.size)>2e6&&(d("La foto debe pesar maximo 2MB"),u=!1),u},{entityName:c,pluralEntityName:i,head:j,table:h,form:g,confirm:v,progress:N,datalist:l,$form:k,handleModeNew:y,handleModeEdit:C,handleModeDelete:q,hanleCancel:n,handleSubmit:P,handleDelete:E,handleSearch:F}=K({entityName:"Producto",pluralEntityName:"Productos",searchFields:["name","description","price","category","sale_type"],extraValidations:a,isStorageMultipartFormData:!0,isUpdateMultipartFormData:!0,crudGet:O,crudStorage:D,crudUpdate:S,crudDestroy:w});return e.jsxs("div",{className:"p-4 space-y-4 w-full ",children:[e.jsx(L,{title:i,icon:M,isOpen:j,onClickNew:y,handleSearch:F}),h&&e.jsxs("div",{className:"grid xs:grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:[(o=l==null?void 0:l.sort((s,d)=>d.active-s.active))==null?void 0:o.map(s=>e.jsx(z,{row:s,onEdit:()=>C(s),onDelete:()=>q(s)},s.id)),l===null&&e.jsxs(e.Fragment,{children:[e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{})]})]}),e.jsxs(T,{title:c,isOpen:g,onClickCancel:n,onSubmit:P,formRef:k,children:[e.jsx(t,{label:"Nombre",name:"name",placeholder:"Nombre del producto",required:!0}),e.jsx(t,{label:"Descripción",name:"description",placeholder:"Escriba una descripción del producto",required:!0}),e.jsx(t,{label:"Precio",name:"price",type:"number",placeholder:"Escriba el precio del producto",required:!0}),e.jsx(t,{label:"Foto",name:"image",type:"file"}),e.jsx(t,{name:"category",label:"Categoria",type:"radio",radioOptions:[{value:"Frutas",label:"Frutas",checked:!0},{value:"Verduras",label:"Verduras"}],required:!0}),e.jsx(t,{name:"sale_type",label:"Tipo de venta",type:"radio",radioOptions:[{value:"Libras",label:"Libra",checked:!0},{value:"Kilos",label:"Kilo"},{value:"Unidades",label:"Unidad"}],required:!0}),e.jsx(t,{name:"offer",label:"Oferta",type:"radio",radioOptions:[{value:1,label:"si"},{value:0,label:"no",checked:!0}],required:!0}),e.jsx(t,{name:"active",label:"Activo",type:"radio",radioOptions:[{value:1,label:"si",checked:!0},{value:0,label:"no"}],required:!0})]}),e.jsx(V,{isOpen:v,text:"¿Estás seguro de eliminar este usuario?",onClickDelete:E,onClickCancel:n}),e.jsx(I,{isOpen:N,text:"Procesando tu solicitud..."})]})}function z({row:a,onEdit:c,onDelete:i}){return e.jsxs("div",{className:" flex flex-col items-center gap-2 p-4 border rounded-lg shadow bg-[--c2] text-[--c2-txt] ",children:[e.jsx("img",{src:a.image_url,alt:a.name,className:" w-32 aspect-square object-contain border rounded-lg "}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-center font-medium text-[--c2-txt] truncate",children:a.name}),e.jsxs("p",{className:" text-sm text-center text-[--c2-txt3] truncate ",children:["$",a.price," / ",a.sale_type]}),e.jsx("p",{className:" text-sm text-center text-[--c2-txt3] truncate ",children:a.category}),e.jsxs("div",{className:" flex justify-center items-center gap-1 text-center ",children:[e.jsx("p",{className:U("text-xs text-center ",{" text-red-600 ":!a.active," text-green-600 ":a.active}),children:a.active?"Activo":"Inactivo"}),!!a.offer&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:" - "}),e.jsx("p",{className:" text-xs text-center text-blue-800 ",children:"En Oferta"})]})]})]}),e.jsxs("div",{className:" flex flex-shrink-0 ",children:[e.jsx(f,{onClick:c,icon:_}),e.jsx(f,{onClick:i,icon:A})]})]})}function r(){return e.jsxs("div",{className:" flex flex-col items-center gap-1 w-full border shadow-md rounded-lg p-4 bg-black/5 animate-pulse ",children:[e.jsx("div",{className:" block w-full aspect-square rounded-md border bg-black/5 "}),e.jsx("div",{className:" w-full h-5 rounded-full bg-black/5 "}),e.jsx("div",{className:" w-2/3 h-5 rounded-full bg-black/5 "}),e.jsx("div",{className:" w-1/2 h-4 rounded-full bg-black/5 "}),e.jsxs("div",{className:" flex justify-center gap-2 w-full ",children:[e.jsx("div",{className:" w-1/3 h-3 rounded-full bg-black/5 "}),e.jsx("div",{className:" w-1/3 h-3 rounded-full bg-black/5 "})]}),e.jsxs("div",{className:" flex justify-center gap-2 w-full ",children:[e.jsx("div",{className:" w-8 aspect-square rounded-md bg-black/5 "}),e.jsx("div",{className:" w-8 aspect-square rounded-md bg-black/5 "})]})]})}export{H as default};
