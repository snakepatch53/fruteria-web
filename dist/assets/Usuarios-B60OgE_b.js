import{v as D,w as S,x as F,y as M,j as e,z as O,A as P,B as I,D as j,E as A,G as B}from"./index-BKrANuFk.js";import{u as G,C as R,a as T,b as i,c as V}from"./useCrudPanel-C2Wkcd-E.js";function J(){const s=(a,o,{isEmail:q})=>{var m,u,x,p;let d=!0;return(m=a.password)!=null&&m.value&&((x=(u=a.password)==null?void 0:u.value)==null?void 0:x.length)<8&&(o("La contraseña debe tener minimo 8 caracteres"),d=!1),q((p=a.email)==null?void 0:p.value)||(o("El correo electronico no es valido"),d=!1),d},{entityName:t,pluralEntityName:n,head:h,table:b,form:f,confirm:g,progress:N,datalist:l,$form:C,handleModeNew:k,handleModeEdit:w,handleModeDelete:v,hanleCancel:c,handleSubmit:E,handleDelete:y,handleSearch:U}=G({entityName:"Usuario",pluralEntityName:"Usuarios",excludeFieldsValidationEdit:["password"],searchFields:["name","email"],extraValidations:s,isStorageMultipartFormData:!0,crudGet:D,crudStorage:S,crudUpdate:F,crudDestroy:M});return e.jsxs("div",{className:"p-4 space-y-4 w-full ",children:[e.jsx(R,{title:n,icon:O,isOpen:h,onClickNew:k,handleSearch:U}),b&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[l==null?void 0:l.map(a=>e.jsx(z,{user:a,onEdit:()=>w(a),onDelete:()=>v(a)},a.id)),l===null&&e.jsxs(e.Fragment,{children:[e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{})]})]}),e.jsxs(T,{title:t,isOpen:f,onClickCancel:c,onSubmit:E,formRef:C,children:[e.jsx(i,{label:"Nombre",name:"name",placeholder:"Nombre del usuario",required:!0}),e.jsx(i,{label:"Email",name:"email",placeholder:"Escriba el email",required:!0}),e.jsx(i,{label:"Contraseña",placeholder:"Escriba una contraseña",type:"password",name:"password",required:!0})]}),e.jsx(V,{isOpen:g,text:"¿Estás seguro de eliminar este usuario?",onClickDelete:y,onClickCancel:c}),e.jsx(P,{isOpen:N,text:"Procesando tu solicitud..."})]})}function z({user:s,onEdit:t,onDelete:n}){return e.jsxs("div",{className:" flex items-center gap-2 p-4 border rounded-lg shadow bg-[--c2] text-[--c2-txt] ",children:[e.jsx(I,{name:s.name}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-[--c2-txt] truncate",children:s.name}),e.jsx("p",{className:"text-sm text-[--c2-txt3] truncate",children:s.email}),e.jsx("p",{className:"text-xs text-[--c2-txt4]",children:s.role})]}),e.jsxs("div",{className:" flex flex-shrink-0 ",children:[e.jsx(j,{onClick:t,icon:A}),e.jsx(j,{onClick:n,icon:B})]})]})}function r(){return e.jsxs("div",{className:" flex gap-2 w-full border shadow-md bg-black/5 animate-pulse py-2 px-4 ",children:[e.jsx("div",{className:" w-11 aspect-square rounded-full bg-black/5 "}),e.jsxs("div",{className:" flex-1 flex flex-col gap-1 ",children:[e.jsx("span",{className:" block w-3/4 h-5 bg-black/5 rounded-full "}),e.jsx("span",{className:" block w-1/2 h-4 bg-black/5 rounded-full "})]}),e.jsxs("div",{className:" flex items-center gap-2 w-16 ",children:[e.jsx("span",{className:" block w-1/2 aspect-square bg-black/5 rounded-md "}),e.jsx("span",{className:" block w-1/2 aspect-square bg-black/5 rounded-md "})]})]})}export{J as default};
