import{A as E,Q as S,R as D,T as M,j as e,I as w,J as I,c as U,M as f,N as T,O as V}from"./index-06cXOb2S.js";import{u as _,C as A,a as L,b as s,c as R}from"./useCrudPanel-CgRDIJHx.js";import"./validations-BBJ6c9mv.js";function H(){var o;const a=(t,d)=>{var x,m,p,b;let u=!0;return(m=(x=t.photo)==null?void 0:x.files)!=null&&m.length&&((b=(p=t.photo)==null?void 0:p.files[0])==null?void 0:b.size)>2e6&&(d("La foto debe pesar maximo 2MB"),u=!1),u},{entityName:c,pluralEntityName:i,head:j,table:h,form:g,confirm:v,progress:N,datalist:l,$form:k,handleModeNew:y,handleModeEdit:C,handleModeDelete:P,hanleCancel:n,handleSubmit:q,handleDelete:F,handleSearch:O}=_({entityName:"Producto",pluralEntityName:"Productos",searchFields:["name","description","price","category","sale_type"],excludeFieldsValidationEdit:["image"],extraValidations:a,isStorageMultipartFormData:!0,isUpdateMultipartFormData:!0,crudGet:E,crudStorage:S,crudUpdate:D,crudDestroy:M});return e.jsxs("div",{className:"p-4 space-y-4 w-full ",children:[e.jsx(A,{title:i,icon:w,isOpen:j,onClickNew:y,handleSearch:O}),h&&e.jsxs("div",{className:"grid xs:grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:[(o=l==null?void 0:l.sort((t,d)=>d.active-t.active))==null?void 0:o.map(t=>e.jsx(B,{row:t,onEdit:()=>C(t),onDelete:()=>P(t)},t.id)),l===null&&e.jsxs(e.Fragment,{children:[e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{})]})]}),e.jsxs(L,{title:c,isOpen:g,onClickCancel:n,onSubmit:q,formRef:k,children:[e.jsx(s,{label:"Nombre",name:"name",placeholder:"Nombre del producto",required:!0}),e.jsx(s,{label:"Descripción",name:"description",placeholder:"Escriba una descripción del producto"}),e.jsx(s,{label:"Precio",name:"price",type:"number",placeholder:"Escriba el precio del producto",required:!0}),e.jsx(s,{label:"Foto",name:"image",type:"file",accept:"image/png",required:!0}),e.jsx(s,{name:"category",label:"Categoria",type:"radio",radioOptions:[{value:"Frutas",label:"Frutas",checked:!0},{value:"Verduras",label:"Verduras"}],required:!0}),e.jsx(s,{name:"sale_type",label:"Tipo de venta",type:"radio",radioOptions:[{value:"Libras",label:"Libra",checked:!0},{value:"Kilos",label:"Kilo"},{value:"Unidades",label:"Unidad"}],required:!0}),e.jsx(s,{name:"offer",label:"Oferta",type:"radio",radioOptions:[{value:1,label:"Si"},{value:0,label:"No",checked:!0}],required:!0}),e.jsx(s,{name:"active",label:"Activo",type:"radio",radioOptions:[{value:1,label:"Si",checked:!0},{value:0,label:"No"}],required:!0})]}),e.jsx(R,{isOpen:v,text:"¿Estás seguro de eliminar este Producto?",onClickDelete:F,onClickCancel:n}),e.jsx(I,{isOpen:N,text:"Procesando tu solicitud..."})]})}function B({row:a,onEdit:c,onDelete:i}){return e.jsxs("div",{className:" flex flex-col items-center gap-2 p-4 border rounded-lg shadow bg-[--c2] text-[--c2-txt] ",children:[e.jsx("img",{src:a.image_url,alt:a.name,className:" w-32 aspect-square object-contain border rounded-lg "}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-center font-medium text-[--c2-txt] truncate",children:a.name}),e.jsxs("p",{className:" text-sm text-center text-[--c2-txt3] truncate ",children:["$",a.price," / ",a.sale_type]}),e.jsx("p",{className:" text-sm text-center text-[--c2-txt3] truncate ",children:a.category}),e.jsxs("div",{className:" flex justify-center items-center gap-1 text-center ",children:[e.jsx("p",{className:U("text-xs text-center ",{" text-red-600 ":a.active==!1," text-green-600 ":a.active==!0}),children:a.active==!0?"Activo":"Inactivo"}),a.offer==!0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:" - "}),e.jsx("p",{className:" text-xs text-center text-blue-800 ",children:"En Oferta"})]})]})]}),e.jsxs("div",{className:" flex flex-shrink-0 ",children:[e.jsx(f,{onClick:c,icon:T}),e.jsx(f,{onClick:i,icon:V})]})]})}function r(){return e.jsxs("div",{className:" flex flex-col items-center gap-1 w-full border shadow-md rounded-lg p-4 bg-black/5 animate-pulse ",children:[e.jsx("div",{className:" block w-full aspect-square rounded-md border bg-black/5 "}),e.jsx("div",{className:" w-full h-5 rounded-full bg-black/5 "}),e.jsx("div",{className:" w-2/3 h-5 rounded-full bg-black/5 "}),e.jsx("div",{className:" w-1/2 h-4 rounded-full bg-black/5 "}),e.jsxs("div",{className:" flex justify-center gap-2 w-full ",children:[e.jsx("div",{className:" w-1/3 h-3 rounded-full bg-black/5 "}),e.jsx("div",{className:" w-1/3 h-3 rounded-full bg-black/5 "})]}),e.jsxs("div",{className:" flex justify-center gap-2 w-full ",children:[e.jsx("div",{className:" w-8 aspect-square rounded-md bg-black/5 "}),e.jsx("div",{className:" w-8 aspect-square rounded-md bg-black/5 "})]})]})}export{H as default};
