import{D,E as S,G as F,H as M,j as e,I as O,J as I,K as P,M as j,N as G,O as H}from"./index-06cXOb2S.js";import{u as R,C as T,a as V,b as i,c as A}from"./useCrudPanel-CgRDIJHx.js";import"./validations-BBJ6c9mv.js";function z(){const s=(a,o,{isEmail:q})=>{var m,u,x,p;let d=!0;return(m=a.password)!=null&&m.value&&((x=(u=a.password)==null?void 0:u.value)==null?void 0:x.length)<8&&(o("La contraseña debe tener minimo 8 caracteres"),d=!1),q((p=a.email)==null?void 0:p.value)||(o("El correo electronico no es valido"),d=!1),d},{entityName:t,pluralEntityName:n,head:h,table:b,form:f,confirm:g,progress:N,datalist:l,$form:C,handleModeNew:k,handleModeEdit:w,handleModeDelete:v,hanleCancel:c,handleSubmit:E,handleDelete:U,handleSearch:y}=R({entityName:"Usuario",pluralEntityName:"Usuarios",excludeFieldsValidationEdit:["password"],searchFields:["name","email"],extraValidations:s,isStorageMultipartFormData:!0,crudGet:D,crudStorage:S,crudUpdate:F,crudDestroy:M});return e.jsxs("div",{className:"p-4 space-y-4 w-full ",children:[e.jsx(T,{title:n,icon:O,isOpen:h,onClickNew:k,handleSearch:y}),b&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[l==null?void 0:l.map(a=>e.jsx(B,{user:a,onEdit:()=>w(a),onDelete:()=>v(a)},a.id)),l===null&&e.jsxs(e.Fragment,{children:[e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{})]})]}),e.jsxs(V,{title:t,isOpen:f,onClickCancel:c,onSubmit:E,formRef:C,children:[e.jsx(i,{label:"Nombre",name:"name",placeholder:"Nombre del usuario",required:!0}),e.jsx(i,{label:"Email",name:"email",placeholder:"Escriba el email",required:!0}),e.jsx(i,{label:"Contraseña",placeholder:"Escriba una contraseña",type:"password",name:"password",required:!0})]}),e.jsx(A,{isOpen:g,text:"¿Estás seguro de eliminar este Usuario?",onClickDelete:U,onClickCancel:c}),e.jsx(I,{isOpen:N,text:"Procesando tu solicitud..."})]})}function B({user:s,onEdit:t,onDelete:n}){return e.jsxs("div",{className:" flex items-center gap-2 p-4 border rounded-lg shadow bg-[--c2] text-[--c2-txt] ",children:[e.jsx(P,{name:s.name}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-[--c2-txt] truncate",children:s.name}),e.jsx("p",{className:"text-sm text-[--c2-txt3] truncate",children:s.email}),e.jsx("p",{className:"text-xs text-[--c2-txt4]",children:s.role})]}),e.jsxs("div",{className:" flex flex-shrink-0 ",children:[e.jsx(j,{onClick:t,icon:G}),e.jsx(j,{onClick:n,icon:H})]})]})}function r(){return e.jsxs("div",{className:" flex gap-2 w-full border shadow-md bg-black/5 animate-pulse py-2 px-4 ",children:[e.jsx("div",{className:" w-11 aspect-square rounded-full bg-black/5 "}),e.jsxs("div",{className:" flex-1 flex flex-col gap-1 ",children:[e.jsx("span",{className:" block w-3/4 h-5 bg-black/5 rounded-full "}),e.jsx("span",{className:" block w-1/2 h-4 bg-black/5 rounded-full "})]}),e.jsxs("div",{className:" flex items-center gap-2 w-16 ",children:[e.jsx("span",{className:" block w-1/2 aspect-square bg-black/5 rounded-md "}),e.jsx("span",{className:" block w-1/2 aspect-square bg-black/5 rounded-md "})]})]})}export{z as default};
